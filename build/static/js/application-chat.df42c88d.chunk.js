(this["webpackJsonpgogo-react"]=this["webpackJsonpgogo-react"]||[]).push([[16],{1133:function(e,t,a){"use strict";a.r(t);var s=a(6),n=a.n(s),c=a(180),r=a(56),l=a(218),o=a.n(l),i=a(183),m=a(175),p=a(0),d=a(281),u=a(608),h=a(609),g=a(263),b=a(264),f=a(176),v=a(171),E=a.n(v),N=a(174),C=a(297);class x extends s.Component{constructor(e){super(e),this.toggleAppMenu=e=>{this.props.activeTab!==e&&this.props.toggleAppMenu(e),"messages"===e&&this.handleSearchContact("")},this.handleSearchContact=e=>{this.setState({searchKey:e}),e.length>0?("contacts"!==this.props.activeTab&&this.props.toggleAppMenu("contacts"),this.props.searchContact(e)):this.props.searchContact("")},this.handleConversationClick=(e,t)=>{this.props.changeConversation(t),this.handleSearchContact("")},this.handleContactClick=e=>{"messages"!==this.props.activeTab&&(this.props.toggleAppMenu("messages"),this.props.searchContact(""));const t=this.props.chatApp,a=t.conversations,s=t.currentUser;a.find(t=>t.users.includes(s.id)&&t.users.includes(e))||this.props.createConversation(s.id,e,a),this.props.changeConversation(e)},this.state={searchKey:""}}render(){const e=this.props.chatApp,t=e.contacts,a=e.allContacts,s=e.conversations,c=e.loadingConversations,r=e.loadingContacts,l=e.currentUser,i=this.props.intl.messages;return n.a.createElement(C.a,null,n.a.createElement(d.a,{className:"pl-0 pr-0"},n.a.createElement(u.a,{tabs:!0,className:"card-header-tabs ml-0 mr-0"},n.a.createElement(h.a,{className:"w-50 text-center"},n.a.createElement(f.b,{className:E()({active:"messages"===this.props.activeTab,"nav-link":!0}),onClick:()=>{this.toggleAppMenu("messages")},to:"#"},n.a.createElement(N.a,{id:"chat.messages"}))),n.a.createElement(h.a,{className:"w-50 text-center"},n.a.createElement(f.b,{className:E()({active:"contacts"===this.props.activeTab,"nav-link":!0}),onClick:()=>{this.toggleAppMenu("contacts")},to:"#"},n.a.createElement(N.a,{id:"chat.contacts"}))))),n.a.createElement("div",{className:"pt-4 pr-4 pl-4 pb-0"},n.a.createElement("div",{className:"form-group"},n.a.createElement("input",{type:"text",className:"form-control rounded",placeholder:i["menu.search"],value:this.state.searchKey,onChange:e=>this.handleSearchContact(e.target.value)}))),n.a.createElement(g.a,{activeTab:this.props.activeTab,className:"chat-app-tab-content"},n.a.createElement(b.a,{tabId:"messages",className:"chat-app-tab-pane"},n.a.createElement(o.a,{options:{suppressScrollX:!0,wheelPropagation:!1}},n.a.createElement("div",{className:"pt-2 pr-4 pl-4 pb-2"},r&&c&&s.map((e,t)=>{const s=a.find(t=>t.id===e.users.find(e=>e!==l.id));return n.a.createElement("div",{key:t,className:"d-flex flex-row mb-1 border-bottom pb-3 mb-3"},n.a.createElement(f.b,{className:"d-flex",to:"#",onClick:e=>this.handleConversationClick(e,s.id)},n.a.createElement("img",{alt:s.name,src:s.thumb,className:"img-thumbnail border-0 rounded-circle mr-3 list-thumbnail align-self-center xsmall"}),n.a.createElement("div",{className:"d-flex flex-grow-1 min-width-zero"},n.a.createElement("div",{className:"pl-0 align-self-center d-flex flex-column flex-lg-row justify-content-between min-width-zero"},n.a.createElement("div",{className:"min-width-zero"},n.a.createElement("p",{className:" mb-0 truncate"},s.name),n.a.createElement("p",{className:"mb-1 text-muted text-small"},e.lastMessageTime))))))})))),n.a.createElement(b.a,{tabId:"contacts",className:"chat-app-tab-pane"},n.a.createElement(o.a,{options:{suppressScrollX:!0,wheelPropagation:!1}},n.a.createElement("div",{className:"pt-2 pr-4 pl-4 pb-2"},r&&t.filter(e=>e.id!==l.id).map((e,t)=>n.a.createElement("div",{key:t,className:"d-flex flex-row mb-3 border-bottom pb-3"},n.a.createElement(f.b,{className:"d-flex",to:"#",onClick:()=>this.handleContactClick(e.id)},n.a.createElement("img",{alt:e.name,src:e.thumb,className:"img-thumbnail border-0 rounded-circle mr-3 list-thumbnail align-self-center xsmall"}),n.a.createElement("div",{className:"d-flex flex-grow-1 min-width-zero"},n.a.createElement("div",{className:"m-2 pl-0 align-self-center d-flex flex-column flex-lg-row justify-content-between min-width-zero"},n.a.createElement("div",{className:"min-width-zero"},n.a.createElement("p",{className:"mb-0 truncate"},e.name))))))))))))}}var T=Object(c.d)(Object(r.b)(({chatApp:e})=>({chatApp:e}),{changeConversation:p.gb,createConversation:p.lb,searchContact:p.Eb})(x));var y=({name:e,thumb:t,lastSeenDate:a})=>n.a.createElement(s.Fragment,null,n.a.createElement("div",{className:"d-flex flex-row chat-heading"},n.a.createElement("div",{className:"d-flex"},n.a.createElement("img",{alt:e,src:t,className:"img-thumbnail border-0 rounded-circle ml-0 mr-4 list-thumbnail align-self-center small"})),n.a.createElement("div",{className:" d-flex min-width-zero"},n.a.createElement("div",{className:"card-body pl-0 align-self-center d-flex flex-column flex-lg-row justify-content-between min-width-zero"},n.a.createElement("div",{className:"min-width-zero"},n.a.createElement("div",null,n.a.createElement("p",{className:"list-item-heading mb-1 truncate "},e)),n.a.createElement("p",{className:"mb-0 text-muted text-small"},"0"===a?"-":a))))),n.a.createElement("div",{className:"separator mb-5"})),j=a(187),w=a(190);var O=({sender:e,item:t,currentUserid:a})=>n.a.createElement(s.Fragment,null,n.a.createElement(j.a,{className:"d-inline-block mb-3 float-".concat(t.sender!==a?"left":"right")},n.a.createElement("div",{className:"position-absolute  pt-1 pr-2 r-0"},n.a.createElement("span",{className:"text-extra-small text-muted"},t.time)),n.a.createElement(w.a,null,n.a.createElement("div",{className:"d-flex flex-row pb-1"},n.a.createElement("img",{alt:e.name,src:e.thumb,className:"img-thumbnail border-0 rounded-circle mr-3 list-thumbnail align-self-center xsmall"}),n.a.createElement("div",{className:" d-flex flex-grow-1 min-width-zero"},n.a.createElement("div",{className:"m-2 pl-0 align-self-center d-flex flex-column flex-lg-row justify-content-between min-width-zero"},n.a.createElement("div",{className:"min-width-zero"},n.a.createElement("p",{className:"mb-0 truncate list-item-heading"},e.name))))),n.a.createElement("div",{className:"chat-text-left"},n.a.createElement("p",{className:"mb-0 text-semi-muted"},t.text)))),n.a.createElement("div",{className:"clearfix"})),M=a(460),k=a(255);class A extends s.Component{render(){const e=this.props,t=e.placeholder,a=e.messageInput,s=e.handleChatInputPress,c=e.handleChatInputChange,r=e.handleSendButtonClick;return n.a.createElement("div",{className:"chat-input-container d-flex justify-content-between align-items-center"},n.a.createElement(M.a,{className:"form-control flex-grow-1",type:"text",placeholder:t,value:a,onKeyPress:e=>s(e),onChange:e=>c(e)}),n.a.createElement("div",null,n.a.createElement(k.a,{outline:!0,color:"primary",className:"icon-button large ml-1"},n.a.createElement("i",{className:"simple-icon-paper-clip"})),n.a.createElement(k.a,{color:"primary",className:"icon-button large ml-1",onClick:()=>r()},n.a.createElement("i",{className:"simple-icon-arrow-right"}))))}}var I=A;class P extends s.Component{constructor(e){super(e),this.handleChatInputPress=e=>{"Enter"===e.key&&this.state.messageInput.length>0&&(this.props.addMessageToConversation(this.props.chatApp.currentUser.id,this.props.chatApp.selectedUser.id,this.state.messageInput,this.props.chatApp.conversations),this.setState({messageInput:"",menuActiveTab:"messages"}))},this.handleChatInputChange=e=>{this.setState({messageInput:e.target.value})},this.handleSendButtonClick=()=>{this.state.messageInput.length>0&&(this.props.addMessageToConversation(this.props.chatApp.currentUser.id,this.props.chatApp.selectedUser.id,this.state.messageInput,this.props.chatApp.conversations),this.setState({messageInput:"",menuActiveTab:"messages"}))},this.toggleAppMenu=e=>{this.setState({menuActiveTab:e})},this.state={menuActiveTab:"messages",messageInput:""}}componentDidMount(){this.props.getContacts(),this.props.getConversations(0)}componentDidUpdate(){this.props.chatApp.loadingConversations&&this.props.chatApp.loadingContacts&&null==this.props.chatApp.selectedUser&&this.props.changeConversation(this.props.chatApp.selectedUserId),this._scrollBarRef&&(this._scrollBarRef._ps.element.scrollTop=this._scrollBarRef._ps.contentHeight)}render(){const e=this.props.chatApp,t=e.allContacts,a=e.conversations,c=e.loadingConversations,r=e.loadingContacts,l=e.currentUser,p=e.selectedUser,d=this.state,u=d.menuActiveTab,h=d.messageInput,g=this.props.intl.messages,b=c&&r&&p?a.find(e=>e.users.includes(l.id)&&e.users.includes(p.id)):null;return c&&r?n.a.createElement(s.Fragment,null,n.a.createElement(i.a,{className:"app-row"},n.a.createElement(m.a,{xxs:"12",className:"chat-app"},c&&p&&n.a.createElement(y,{name:p.name,thumb:p.thumb,lastSeenDate:p.lastSeenDate}),b&&n.a.createElement(o.a,{ref:e=>{this._scrollBarRef=e},containerRef:e=>{},options:{suppressScrollX:!0,wheelPropagation:!1}},b.messages.map((e,a)=>{const s=t.find(t=>t.id===e.sender);return n.a.createElement(O,{key:a,sender:s,item:e,currentUserid:l.id})})))),n.a.createElement(I,{placeholder:g["chat.saysomething"],messageInput:h,handleChatInputPress:this.handleChatInputPress,handleChatInputChange:this.handleChatInputChange,handleSendButtonClick:this.handleSendButtonClick}),n.a.createElement(T,{activeTab:u,toggleAppMenu:this.toggleAppMenu})):n.a.createElement("div",{className:"loading"})}}t.default=Object(c.d)(Object(r.b)(({chatApp:e})=>({chatApp:e}),{getContacts:p.ob,getConversations:p.pb,changeConversation:p.gb,addMessageToConversation:p.db})(P))},175:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return l}));var s=a(6),n=a.n(s),c=a(182);const r=e=>n.a.createElement(c.a,Object.assign({},e,{widths:["xxs","xs","sm","md","lg","xl","xxl"]})),l=e=>n.a.createElement("div",{className:"separator ".concat(e.className)})},182:function(e,t,a){"use strict";var s=a(11),n=a(19),c=a(6),r=a.n(c),l=a(83),o=a.n(l),i=a(171),m=a.n(i),p=a(172),d=o.a.oneOfType([o.a.number,o.a.string]),u=o.a.oneOfType([o.a.bool,o.a.number,o.a.string,o.a.shape({size:o.a.oneOfType([o.a.bool,o.a.number,o.a.string]),order:d,offset:d})]),h={tag:p.tagPropType,xs:u,sm:u,md:u,lg:u,xl:u,className:o.a.string,cssModule:o.a.object,widths:o.a.array},g={tag:"div",widths:["xs","sm","md","lg","xl"]},b=function(e,t,a){return!0===a||""===a?e?"col":"col-"+t:"auto"===a?e?"col-auto":"col-"+t+"-auto":e?"col-"+a:"col-"+t+"-"+a},f=function(e){var t=e.className,a=e.cssModule,c=e.widths,l=e.tag,o=Object(n.a)(e,["className","cssModule","widths","tag"]),i=[];c.forEach((function(t,s){var n=e[t];if(delete o[t],n||""===n){var c=!s;if(Object(p.isObject)(n)){var r,l=c?"-":"-"+t+"-",d=b(c,t,n.size);i.push(Object(p.mapToCssModules)(m()(((r={})[d]=n.size||""===n.size,r["order"+l+n.order]=n.order||0===n.order,r["offset"+l+n.offset]=n.offset||0===n.offset,r)),a))}else{var u=b(c,t,n);i.push(u)}}})),i.length||i.push("col");var d=Object(p.mapToCssModules)(m()(t,i),a);return r.a.createElement(l,Object(s.a)({},o,{className:d}))};f.propTypes=h,f.defaultProps=g,t.a=f},183:function(e,t,a){"use strict";var s=a(11),n=a(19),c=a(6),r=a.n(c),l=a(83),o=a.n(l),i=a(171),m=a.n(i),p=a(172),d=o.a.oneOfType([o.a.number,o.a.string]),u={tag:p.tagPropType,noGutters:o.a.bool,className:o.a.string,cssModule:o.a.object,form:o.a.bool,xs:d,sm:d,md:d,lg:d,xl:d},h={tag:"div",widths:["xs","sm","md","lg","xl"]},g=function(e){var t=e.className,a=e.cssModule,c=e.noGutters,l=e.tag,o=e.form,i=e.widths,d=Object(n.a)(e,["className","cssModule","noGutters","tag","form","widths"]),u=[];i.forEach((function(t,a){var s=e[t];if(delete d[t],s){var n=!a;u.push(n?"row-cols-"+s:"row-cols-"+t+"-"+s)}}));var h=Object(p.mapToCssModules)(m()(t,c?"no-gutters":null,o?"form-row":"row",u),a);return r.a.createElement(l,Object(s.a)({},d,{className:h}))};g.propTypes=u,g.defaultProps=h,t.a=g},187:function(e,t,a){"use strict";var s=a(11),n=a(19),c=a(6),r=a.n(c),l=a(83),o=a.n(l),i=a(171),m=a.n(i),p=a(172),d={tag:p.tagPropType,inverse:o.a.bool,color:o.a.string,body:o.a.bool,outline:o.a.bool,className:o.a.string,cssModule:o.a.object,innerRef:o.a.oneOfType([o.a.object,o.a.string,o.a.func])},u=function(e){var t=e.className,a=e.cssModule,c=e.color,l=e.body,o=e.inverse,i=e.outline,d=e.tag,u=e.innerRef,h=Object(n.a)(e,["className","cssModule","color","body","inverse","outline","tag","innerRef"]),g=Object(p.mapToCssModules)(m()(t,"card",!!o&&"text-white",!!l&&"card-body",!!c&&(i?"border":"bg")+"-"+c),a);return r.a.createElement(d,Object(s.a)({},h,{className:g,ref:u}))};u.propTypes=d,u.defaultProps={tag:"div"},t.a=u},190:function(e,t,a){"use strict";var s=a(11),n=a(19),c=a(6),r=a.n(c),l=a(83),o=a.n(l),i=a(171),m=a.n(i),p=a(172),d={tag:p.tagPropType,className:o.a.string,cssModule:o.a.object,innerRef:o.a.oneOfType([o.a.object,o.a.string,o.a.func])},u=function(e){var t=e.className,a=e.cssModule,c=e.innerRef,l=e.tag,o=Object(n.a)(e,["className","cssModule","innerRef","tag"]),i=Object(p.mapToCssModules)(m()(t,"card-body"),a);return r.a.createElement(l,Object(s.a)({},o,{className:i,ref:c}))};u.propTypes=d,u.defaultProps={tag:"div"},t.a=u},199:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var s=a(6),n=a.n(s).a.createContext({})},263:function(e,t,a){"use strict";var s=a(11),n=a(178),c=a(6),r=a.n(c),l=a(83),o=a.n(l),i=a(171),m=a.n(i),p=a(199),d=a(172),u={tag:d.tagPropType,activeTab:o.a.any,className:o.a.string,cssModule:o.a.object},h=function(e){function t(t){var a;return(a=e.call(this,t)||this).state={activeTab:a.props.activeTab},a}return Object(n.a)(t,e),t.getDerivedStateFromProps=function(e,t){return t.activeTab!==e.activeTab?{activeTab:e.activeTab}:null},t.prototype.render=function(){var e=this.props,t=e.className,a=e.cssModule,n=e.tag,c=Object(d.omit)(this.props,Object.keys(u)),l=Object(d.mapToCssModules)(m()("tab-content",t),a);return r.a.createElement(p.a.Provider,{value:{activeTabId:this.state.activeTab}},r.a.createElement(n,Object(s.a)({},c,{className:l})))},t}(c.Component);t.a=h,h.propTypes=u,h.defaultProps={tag:"div"}},264:function(e,t,a){"use strict";a.d(t,"a",(function(){return h}));var s=a(11),n=a(19),c=a(6),r=a.n(c),l=a(83),o=a.n(l),i=a(171),m=a.n(i),p=a(199),d=a(172),u={tag:d.tagPropType,className:o.a.string,cssModule:o.a.object,tabId:o.a.any};function h(e){var t=e.className,a=e.cssModule,c=e.tabId,l=e.tag,o=Object(n.a)(e,["className","cssModule","tabId","tag"]),i=function(e){return Object(d.mapToCssModules)(m()("tab-pane",t,{active:c===e}),a)};return r.a.createElement(p.a.Consumer,null,(function(e){var t=e.activeTabId;return r.a.createElement(l,Object(s.a)({},o,{className:i(t)}))}))}h.propTypes=u,h.defaultProps={tag:"div"}},281:function(e,t,a){"use strict";var s=a(11),n=a(19),c=a(6),r=a.n(c),l=a(83),o=a.n(l),i=a(171),m=a.n(i),p=a(172),d={tag:p.tagPropType,className:o.a.string,cssModule:o.a.object},u=function(e){var t=e.className,a=e.cssModule,c=e.tag,l=Object(n.a)(e,["className","cssModule","tag"]),o=Object(p.mapToCssModules)(m()(t,"card-header"),a);return r.a.createElement(c,Object(s.a)({},l,{className:o}))};u.propTypes=d,u.defaultProps={tag:"div"},t.a=u},286:function(e,t,a){"use strict";var s=a(11),n=a(19),c=a(181),r=a(178),l=a(6),o=a.n(l),i=a(83),m=a.n(i),p=a(171),d=a.n(p),u=a(172),h={tag:u.tagPropType,innerRef:m.a.oneOfType([m.a.object,m.a.func,m.a.string]),disabled:m.a.bool,active:m.a.bool,className:m.a.string,cssModule:m.a.object,onClick:m.a.func,href:m.a.any},g=function(e){function t(t){var a;return(a=e.call(this,t)||this).onClick=a.onClick.bind(Object(c.a)(a)),a}Object(r.a)(t,e);var a=t.prototype;return a.onClick=function(e){this.props.disabled?e.preventDefault():("#"===this.props.href&&e.preventDefault(),this.props.onClick&&this.props.onClick(e))},a.render=function(){var e=this.props,t=e.className,a=e.cssModule,c=e.active,r=e.tag,l=e.innerRef,i=Object(n.a)(e,["className","cssModule","active","tag","innerRef"]),m=Object(u.mapToCssModules)(d()(t,"nav-link",{disabled:i.disabled,active:c}),a);return o.a.createElement(r,Object(s.a)({},i,{ref:l,onClick:this.onClick,className:m}))},t}(o.a.Component);g.propTypes=h,g.defaultProps={tag:"a"},t.a=g},297:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var s=a(6),n=a.n(s),c=a(33),r=a.n(c),l=a(286);class o extends n.a.Component{constructor(...e){super(...e),this.handleDocumentClick=this.handleDocumentClick.bind(this),this.toggle=this.toggle.bind(this),this.state={isOpen:!1}}handleDocumentClick(e){const t=r.a.findDOMNode(this);t.contains(e.target)||t===e.target||this.toggle(e)}toggle(e){e.preventDefault();const t=this.state.isOpen;t?this.removeEvents():this.addEvents(),this.setState({isOpen:!t})}componentWillUnmount(){this.removeEvents()}addEvents(){["click","touchstart"].forEach(e=>document.addEventListener(e,this.handleDocumentClick,!0))}removeEvents(){["click","touchstart"].forEach(e=>document.removeEventListener(e,this.handleDocumentClick,!0))}render(){return n.a.createElement("div",{className:"app-menu ".concat(this.state.isOpen?"shown":"")},this.props.children,n.a.createElement(l.a,{className:"app-menu-button d-inline-block d-xl-none",onClick:this.toggle},n.a.createElement("i",{className:"simple-icon-options"})))}}}}]);